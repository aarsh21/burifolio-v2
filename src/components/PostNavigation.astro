---
import Link from '@/components/Link.astro'
import { cn } from '@/lib/utils'
import { Icon } from 'astro-icon/components'

const { newerPost, olderPost, parentPost } = Astro.props
const isSubpost = !!parentPost
---

<nav
  class={cn(
    'grid grid-cols-1 gap-3',
    isSubpost ? 'sm:grid-cols-3' : 'sm:grid-cols-2',
  )}
>
  <!-- Older/Previous Post -->
  <Link
    href={olderPost ? `/blog/${olderPost.id}#post-title` : '#'}
    class={cn(
      'brutal-hover group flex items-center gap-3 border-2 border-foreground bg-background p-4 transition-all',
      !olderPost && 'pointer-events-none opacity-40',
    )}
    aria-disabled={!olderPost}
  >
    <div class="flex size-10 shrink-0 items-center justify-center border-2 border-foreground bg-muted transition-colors group-hover:bg-accent group-hover:text-accent-foreground">
      <Icon
        name="lucide:arrow-left"
        class="size-4 transition-transform group-hover:-translate-x-0.5"
      />
    </div>
    <div class="flex min-w-0 flex-col">
      <span class="text-xs font-bold uppercase tracking-wide text-muted-foreground">
        {isSubpost ? 'Prev Subpost' : 'Previous'}
      </span>
      <span class="truncate text-sm font-medium">
        {olderPost?.data.title || (isSubpost ? 'No older subpost' : 'Oldest post')}
      </span>
    </div>
  </Link>

  <!-- Parent Post (only for subposts) -->
  {
    isSubpost && (
      <Link
        href={parentPost ? `/blog/${parentPost.id}#post-title` : '#'}
        class={cn(
          'brutal-hover group flex items-center justify-center gap-3 border-2 border-foreground bg-background p-4 transition-all',
          !parentPost && 'pointer-events-none opacity-40',
        )}
      >
        <div class="flex size-10 shrink-0 items-center justify-center border-2 border-foreground bg-accent text-accent-foreground">
          <Icon
            name="lucide:corner-left-up"
            class="size-4 transition-transform group-hover:-translate-y-0.5"
          />
        </div>
        <div class="flex min-w-0 flex-col text-center">
          <span class="text-xs font-bold uppercase tracking-wide text-muted-foreground">
            Parent Post
          </span>
          <span class="truncate text-sm font-medium">
            {parentPost?.data.title || 'No parent'}
          </span>
        </div>
      </Link>
    )
  }

  <!-- Newer/Next Post -->
  <Link
    href={newerPost ? `/blog/${newerPost.id}#post-title` : '#'}
    class={cn(
      'brutal-hover group flex items-center justify-end gap-3 border-2 border-foreground bg-background p-4 transition-all',
      !newerPost && 'pointer-events-none opacity-40',
    )}
    aria-disabled={!newerPost}
  >
    <div class="flex min-w-0 flex-col items-end">
      <span class="text-xs font-bold uppercase tracking-wide text-muted-foreground">
        {isSubpost ? 'Next Subpost' : 'Next'}
      </span>
      <span class="truncate text-sm font-medium">
        {newerPost?.data.title || (isSubpost ? 'No newer subpost' : 'Newest post')}
      </span>
    </div>
    <div class="flex size-10 shrink-0 items-center justify-center border-2 border-foreground bg-muted transition-colors group-hover:bg-accent group-hover:text-accent-foreground">
      <Icon
        name="lucide:arrow-right"
        class="size-4 transition-transform group-hover:translate-x-0.5"
      />
    </div>
  </Link>
</nav>
