@import 'tailwindcss';

@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

@theme inline {
  --font-mono:
    'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
    'Liberation Mono', 'Courier New', monospace;

  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);

  --color-additive: var(--additive);
  --color-additive-foreground: var(--additive-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-border: var(--border);
  --color-ring: var(--ring);

  /* Animations */
  --animate-in-up: in-up 0.5s cubic-bezier(0.22, 1, 0.36, 1) backwards;
  --animate-in-left: in-left 0.5s cubic-bezier(0.22, 1, 0.36, 1) backwards;
  --animate-scale-in: scale-in 0.4s cubic-bezier(0.22, 1, 0.36, 1) backwards;
  --animate-marquee: marquee 20s linear infinite;

  @keyframes in-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes in-left {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes marquee {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-50%);
    }
  }

  @keyframes glitch-1 {
    0%,
    100% {
      transform: translate(0);
    }
    20% {
      transform: translate(-2px, 2px);
    }
    40% {
      transform: translate(-2px, -2px);
    }
    60% {
      transform: translate(2px, 2px);
    }
    80% {
      transform: translate(2px, -2px);
    }
  }

  @keyframes glitch-2 {
    0%,
    100% {
      transform: translate(0);
    }
    20% {
      transform: translate(2px, -2px);
    }
    40% {
      transform: translate(2px, 2px);
    }
    60% {
      transform: translate(-2px, -2px);
    }
    80% {
      transform: translate(-2px, 2px);
    }
  }
}

@font-face {
  font-family: 'JetBrains Mono';
  src: url('/fonts/JetBrainsMono[wght].woff2') format('woff2-variations');
  font-weight: 100 800;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'JetBrains Mono';
  src: url('/fonts/JetBrainsMono-Italic[wght].woff2') format('woff2-variations');
  font-weight: 100 800;
  font-style: italic;
  font-display: swap;
}

/* Brutalist Light Theme - High Contrast, Raw */
:root {
  --background: hsl(60 9% 96%);
  --header-background: hsl(60 9% 92%);
  --foreground: hsl(0 0% 4%);
  --primary: hsl(0 0% 0%);
  --primary-foreground: hsl(60 9% 96%);
  --secondary: hsl(60 6% 88%);
  --secondary-foreground: hsl(0 0% 4%);
  --muted: hsl(60 6% 88%);
  --muted-foreground: hsl(0 0% 35%);
  --accent: hsl(45 100% 50%);
  --accent-foreground: hsl(0 0% 0%);
  --additive: hsl(142 76% 36%);
  --additive-foreground: hsl(0 0% 100%);
  --destructive: hsl(0 84% 60%);
  --destructive-foreground: hsl(0 0% 100%);
  --border: hsl(0 0% 0%);
  --ring: hsl(0 0% 0%);

  /* Brutalist specific */
  --border-width: 2px;
  --shadow-brutalist: 4px 4px 0 hsl(0 0% 0%);
  --shadow-brutalist-sm: 2px 2px 0 hsl(0 0% 0%);
  --shadow-brutalist-lg: 6px 6px 0 hsl(0 0% 0%);
  --noise-opacity: 0.03;
}

/* Brutalist Dark Theme */
[data-theme='dark'] {
  --background: hsl(0 0% 6%);
  --header-background: hsl(0 0% 3%);
  --foreground: hsl(60 9% 96%);
  --primary: hsl(60 9% 96%);
  --primary-foreground: hsl(0 0% 6%);
  --secondary: hsl(0 0% 14%);
  --secondary-foreground: hsl(60 9% 96%);
  --muted: hsl(0 0% 14%);
  --muted-foreground: hsl(0 0% 60%);
  --accent: hsl(45 100% 50%);
  --accent-foreground: hsl(0 0% 0%);
  --additive: hsl(142 76% 46%);
  --additive-foreground: hsl(0 0% 0%);
  --destructive: hsl(0 72% 51%);
  --destructive-foreground: hsl(0 0% 100%);
  --border: hsl(60 9% 96%);
  --ring: hsl(60 9% 96%);

  --shadow-brutalist: 4px 4px 0 hsl(60 9% 96%);
  --shadow-brutalist-sm: 2px 2px 0 hsl(60 9% 96%);
  --shadow-brutalist-lg: 6px 6px 0 hsl(60 9% 96%);
  --noise-opacity: 0.02;
}

@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    @apply border-border outline-ring/50;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    @apply selection:bg-accent selection:text-accent-foreground;
  }

  /* Custom scrollbar - brutalist style */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-muted;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-foreground;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-foreground/80;
  }
}

/* Brutalist utility classes */
@utility shadow-brutal {
  box-shadow: var(--shadow-brutalist);
}

@utility shadow-brutal-sm {
  box-shadow: var(--shadow-brutalist-sm);
}

@utility shadow-brutal-lg {
  box-shadow: var(--shadow-brutalist-lg);
}

/* Hover state for brutalist elements */
@utility brutal-hover {
  @apply transition-all duration-150;

  &:hover {
    transform: translate(-2px, -2px);
    box-shadow: 6px 6px 0 var(--foreground);
  }

  &:active {
    transform: translate(0, 0);
    box-shadow: 2px 2px 0 var(--foreground);
  }
}

/* Grid pattern background */
@utility bg-grid {
  background-image:
    linear-gradient(to right, var(--border) 1px, transparent 1px),
    linear-gradient(to bottom, var(--border) 1px, transparent 1px);
  background-size: 24px 24px;
}

@utility bg-grid-dense {
  background-image:
    linear-gradient(to right, var(--border) 1px, transparent 1px),
    linear-gradient(to bottom, var(--border) 1px, transparent 1px);
  background-size: 12px 12px;
}

/* Noise texture overlay */
@utility noise {
  &::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: var(--noise-opacity);
    pointer-events: none;
    z-index: 1;
  }
}

/* Glitch effect for headings */
@utility glitch {
  position: relative;

  &::before,
  &::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
  }

  &:hover::before {
    animation: glitch-1 0.3s linear infinite;
    color: var(--accent);
    opacity: 0.8;
    z-index: -1;
  }

  &:hover::after {
    animation: glitch-2 0.3s linear infinite;
    color: var(--destructive);
    opacity: 0.8;
    z-index: -2;
  }
}

/* Underline animation */
@utility link-underline {
  position: relative;

  &::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 2px;
    background: currentColor;
    transition: width 0.2s ease-out;
  }

  &:hover::after {
    width: 100%;
  }
}

/* Block decoration */
@utility block-accent {
  position: relative;

  &::before {
    content: '';
    position: absolute;
    left: -16px;
    top: 0;
    bottom: 0;
    width: 4px;
    background: var(--accent);
  }
}

/* Stagger children animations */
@utility stagger-children {
  & > * {
    animation: in-up 0.5s cubic-bezier(0.22, 1, 0.36, 1) backwards;
  }

  & > *:nth-child(1) {
    animation-delay: 0ms;
  }
  & > *:nth-child(2) {
    animation-delay: 50ms;
  }
  & > *:nth-child(3) {
    animation-delay: 100ms;
  }
  & > *:nth-child(4) {
    animation-delay: 150ms;
  }
  & > *:nth-child(5) {
    animation-delay: 200ms;
  }
  & > *:nth-child(6) {
    animation-delay: 250ms;
  }
  & > *:nth-child(7) {
    animation-delay: 300ms;
  }
  & > *:nth-child(8) {
    animation-delay: 350ms;
  }
  & > *:nth-child(9) {
    animation-delay: 400ms;
  }
  & > *:nth-child(10) {
    animation-delay: 450ms;
  }
}
