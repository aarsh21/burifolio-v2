---
import Breadcrumbs from '@/components/Breadcrumbs.astro'
import PageHead from '@/components/PageHead.astro'
import ProjectCard from '@/components/ProjectCard.astro'
import Layout from '@/layouts/Layout.astro'
import { getAllProjects } from '@/lib/data-utils'
import { Icon } from 'astro-icon/components'

const projects = await getAllProjects()
---

<Layout class="max-w-4xl">
  <PageHead slot="head" title="Projects" />
  <Breadcrumbs items={[{ label: 'Projects', icon: 'lucide:briefcase' }]} />
  
  <section class="flex flex-col gap-y-8">
    <!-- Header -->
    <div class="relative border-2 border-foreground bg-background p-6 shadow-brutal">
      <!-- Corner accents -->
      <div class="absolute -left-1 -top-1 h-4 w-4 border-l-4 border-t-4 border-accent"></div>
      <div class="absolute -right-1 -top-1 h-4 w-4 border-r-4 border-t-4 border-accent"></div>
      
      <div class="flex items-center justify-between">
        <div>
          <div class="mb-2 inline-block border-2 border-foreground bg-accent px-2 py-0.5 text-xs font-bold uppercase text-accent-foreground">
            Portfolio
          </div>
          <h1 class="text-3xl font-bold uppercase tracking-tight sm:text-4xl">
            My Projects
          </h1>
          <p class="mt-2 text-muted-foreground">
            Things I've built, contributed to, or just enjoyed creating.
          </p>
        </div>
        
        <!-- Project count badge -->
        <div class="hidden border-2 border-foreground bg-muted px-4 py-3 text-center sm:block">
          <div class="text-2xl font-bold">{projects.length}</div>
          <div class="text-xs uppercase tracking-wide text-muted-foreground">Projects</div>
        </div>
      </div>
    </div>
    
    <!-- Projects Grid -->
    <div class="stagger-children grid gap-4 sm:grid-cols-2">
      {projects.map((project, index) => (
        <div style={`animation-delay: ${index * 80}ms`}>
          <ProjectCard project={project} index={index} />
        </div>
      ))}
    </div>
    
    <!-- Call to action -->
    <div class="border-2 border-foreground bg-foreground p-5 text-center text-background">
      <Icon name="lucide:github" class="mx-auto mb-3 h-8 w-8" />
      <h3 class="mb-2 text-lg font-bold uppercase">Want to see more?</h3>
      <p class="mb-4 text-sm opacity-80">
        Check out my GitHub for more projects and contributions.
      </p>
      <a 
        href="https://github.com/aarsh21" 
        target="_blank"
        rel="noopener noreferrer"
        class="brutal-hover inline-flex items-center gap-2 border-2 border-background bg-background px-5 py-2 text-sm font-bold uppercase text-foreground transition-colors hover:bg-accent hover:text-accent-foreground"
      >
        <span>View GitHub</span>
        <Icon name="lucide:arrow-up-right" class="h-4 w-4" />
      </a>
    </div>
  </section>
</Layout>
